/* @license GNU-GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function($,Drupal,debounce){'use strict';var $window=$(window);Drupal.ImageWidgetCrop=function(element){this.$wrapper=$(element);this.$summary=this.$wrapper.find(this.selectors.summary).first();this.initialized=false;this.summary=Drupal.t('Crop image');this.types=[];this.init();};Drupal.ImageWidgetCrop.prototype.selectors={summary:'> summary, > legend',types:'[data-drupal-iwc=type]',wrapper:'[data-drupal-iwc=wrapper]'};Drupal.ImageWidgetCrop.prototype.destroy=function(){this.types.forEach(function(type){type.destroy();});};Drupal.ImageWidgetCrop.prototype.init=function(){if(this.initialized)return;var _this=this;this.$wrapper.find(this.selectors.types).each(function(){_this.types.push(new Drupal.ImageWidgetCropType(_this,this));});$window.on('resize.iwc',debounce(this.resize.bind(this),250));this.$wrapper.on('summaryUpdated',this.updateSummary.bind(this));this.$wrapper.trigger('summaryUpdated');this.$wrapper.closest('form').find('input').on('keypress',function(e){return e.which!==13;});};Drupal.ImageWidgetCrop.prototype.resize=function(){var args=arguments;this.types.forEach(function(type){type.resize.apply(type,args);});};Drupal.ImageWidgetCrop.prototype.updateSummary=function(){var text=Drupal.t('Crop image');for(var i=0,l=this.types.length;i<l;i++){var type=this.types[i];if(type.getValue('applied')){text=Drupal.t('Crop image (cropping applied)');break;}}if(this.summary!==text)this.$summary.text(this.summary=text);};}(jQuery,Drupal,Drupal.debounce));;
(function($,Drupal){'use strict';Drupal.ImageWidgetCropType=function(instance,element){this.instance=instance;this.$cropperWrapper=$();this.$wrapper=$(element);this.$table=this.$wrapper.find(this.selectors.table);this.$image=this.$wrapper.find(this.selectors.image);this.$reset=this.$wrapper.find(this.selectors.reset);this.cropper=null;this.enabled=true;this.hardLimit={height:null,width:null,reached:{height:false,width:false}};this.id=null;this.initialized=false;this.intervals={};this.naturalDelta=null;this.naturalHeight=null;this.naturalWidth=null;this.originalHeight=0;this.originalWidth=0;this.options={};this.showDefaultCrop=true;this.isRequired=false;this.softLimit={height:null,width:null,reached:{height:false,width:false}};this.ratio=NaN;this.values={applied:this.$wrapper.find(this.selectors.values.applied),height:this.$wrapper.find(this.selectors.values.height),width:this.$wrapper.find(this.selectors.values.width),x:this.$wrapper.find(this.selectors.values.x),y:this.$wrapper.find(this.selectors.values.y)};this.visible=false;this.init();};Drupal.ImageWidgetCropType.prototype.dataPrefix=/^drupalIwc/;Drupal.ImageWidgetCropType.prototype.defaultOptions={autoCropArea:1,background:false,responsive:false,viewMode:1,zoomable:false};Drupal.ImageWidgetCropType.prototype.selectors={image:'[data-drupal-iwc=image]',reset:'[data-drupal-iwc=reset]',table:'[data-drupal-iwc=table]',values:{applied:'[data-drupal-iwc-value=applied]',height:'[data-drupal-iwc-value=height]',width:'[data-drupal-iwc-value=width]',x:'[data-drupal-iwc-value=x]',y:'[data-drupal-iwc-value=y]'}};Drupal.ImageWidgetCropType.prototype.cropperReady=function(){this.built();if(this.getValue('applied')){var canvasData=this.cropper.getCanvasData();var cropBoxData=this.getValues(this.originalHeight/canvasData.height);cropBoxData.left=cropBoxData.x+canvasData.left;cropBoxData.top=cropBoxData.y+canvasData.top;var containerData=this.cropper.getContainerData();var limited=this.options.viewMode===1||this.options.viewMode===2;var maxCropBoxWidth=Math.min(containerData.width,limited?canvasData.width:containerData.width);var maxCropBoxHeight=Math.min(containerData.height,limited?canvasData.height:containerData.height);if(this.ratio)if(maxCropBoxHeight*this.ratio>maxCropBoxWidth)maxCropBoxHeight=maxCropBoxWidth/this.ratio;else maxCropBoxWidth=maxCropBoxHeight*this.ratio;cropBoxData.width=Math.min(cropBoxData.width,maxCropBoxWidth);cropBoxData.height=Math.min(cropBoxData.height,maxCropBoxHeight);this.cropper.setCropBoxData(cropBoxData);}};Drupal.ImageWidgetCropType.prototype.built=function(){this.$cropperWrapper=this.$wrapper.find('.cropper-container');this.updateHardLimits();this.updateSoftLimits();};Drupal.ImageWidgetCropType.prototype.cropEnd=function(){if(!this.cropper)return;var data=this.cropper.getData();data.applied=1;this.setValues(data,this.naturalDelta);this.$wrapper.trigger('summaryUpdated');};Drupal.ImageWidgetCropType.prototype.cropMove=function(){this.built();};Drupal.ImageWidgetCropType.prototype.destroy=function(){this.destroyCropper();this.$image.off('.iwc');this.$reset.off('.iwc');for(var interval in this.intervals)if(this.intervals.hasOwnProperty(interval)){clearInterval(interval);delete this.intervals[interval];}};Drupal.ImageWidgetCropType.prototype.destroyCropper=function(){this.$image.off('.iwc.cropper');if(this.cropper){this.cropper.destroy();this.cropper=null;}};Drupal.ImageWidgetCropType.prototype.disable=function(){if(this.cropper)this.cropper.disable();this.$table.removeClass('responsive-enabled--opened');};Drupal.ImageWidgetCropType.prototype.enable=function(){if(this.cropper)this.cropper.enable();this.$table.addClass('responsive-enabled--opened');};Drupal.ImageWidgetCropType.prototype.getValue=function(name,delta){var value=0;if(this.values[name]&&this.values[name][0])value=parseInt(this.values[name][0].value,10)||0;return name!=='applied'&&value&&delta?Math.floor(value/delta):value;};Drupal.ImageWidgetCropType.prototype.getValues=function(delta){var values={};for(var name in this.values)if(this.values.hasOwnProperty(name))values[name]=this.getValue(name,delta);return values;};Drupal.ImageWidgetCropType.prototype.init=function(){if(this.initialized)return;this.options=$.extend({},this.defaultOptions);this.isRequired=this.$wrapper.data('drupalIwcRequired');var data=this.$wrapper.data();for(var i in data)if(data.hasOwnProperty(i)&&this.dataPrefix.test(i)){var prop=i.replace(this.dataPrefix,'');prop=prop.charAt(0).toLowerCase()+prop.slice(1);if(prop&&this.hasOwnProperty(prop)){var value=data[i];if(prop==='ratio')value=this.parseRatio(value);this[prop]=typeof value==='object'?$.extend(true,{},this[prop],value):value;}}this.$image.on('visible.iwc',function(){this.visible=true;this.naturalHeight=parseInt(this.$image.prop('naturalHeight'),10);this.naturalWidth=parseInt(this.$image.prop('naturalWidth'),10);this.naturalDelta=this.originalHeight&&this.naturalHeight?this.originalHeight/this.naturalHeight:null;}.bind(this)).one('visible.iwc',this.initializeCropper.bind(this)).on('hidden.iwc',function(){this.visible=false;}.bind(this));this.$reset.on('click.iwc',this.reset.bind(this));this.pollVisibility(this.$image);this.$wrapper.drupalSetSummary(this.updateSummary.bind(this));this.$wrapper.trigger('summaryUpdated');var isIE=false||!!document.documentMode;if(isIE){var $image=this.$image;$('.image-data__crop-wrapper > summary').on('click',function(){setTimeout(function(){$image.trigger('visible.iwc');},100);});}};Drupal.ImageWidgetCropType.prototype.initializeCropper=function(){var minDelta=(this.originalWidth/200);this.options.minContainerHeight=this.originalHeight/minDelta;this.options.autoCrop=this.showDefaultCrop||!!this.getValue('applied');this.options.aspectRatio=this.ratio;this.$image.on('ready.iwc.cropper',this.cropperReady.bind(this)).on('cropend.iwc.cropper',this.cropEnd.bind(this)).on('cropmove.iwc.cropper',this.cropMove.bind(this)).cropper(this.options);this.cropper=this.$image.data('cropper');this.options=this.cropper.options;if(this.showDefaultCrop){this.setValue(this.$image.cropper('getData'),this.naturalDelta);this.$wrapper.trigger('summaryUpdated');}};Drupal.ImageWidgetCropType.prototype.pollVisibility=function(element){var $element=$(element);if(!$element[0])return;var isElementVisible=function(el){var rect=el.getBoundingClientRect();var vWidth=window.innerWidth||document.documentElement.clientWidth;var vHeight=window.innerHeight||document.documentElement.clientHeight;if(rect.right<0||rect.bottom<0||rect.left>vWidth||rect.top>vHeight)return false;var efp=function(x,y){return document.elementFromPoint(x,y);};return (el.contains(efp(rect.left,rect.top))||el.contains(efp(rect.right,rect.top))||el.contains(efp(rect.right,rect.bottom))||el.contains(efp(rect.left,rect.bottom)));};var value=null;var interval=setInterval(function(){var visible=isElementVisible($element[0]);if(value!==visible)$element.trigger((value=visible)?'visible.iwc':'hidden.iwc');},250);this.intervals[interval]=$element;};Drupal.ImageWidgetCropType.prototype.parseRatio=function(ratio){if(ratio&&/:/.test(ratio)){var parts=ratio.split(':');var num1=parseInt(parts[0],10);var num2=parseInt(parts[1],10);return num1/num2;}return parseFloat(ratio);};Drupal.ImageWidgetCropType.prototype.reset=function(e){if(!this.cropper)return;if(e instanceof Event||e instanceof $.Event){e.preventDefault();e.stopPropagation();}this.options=$.extend({},this.cropper.options,this.defaultOptions);var delta=null;var values=this.getValues();for(var name in values)if(values.hasOwnProperty(name))values[name]=0;if(!this.showDefaultCrop){this.destroyCropper();this.initializeCropper();}else{this.cropper.reset();this.cropper.options=this.options;delta=this.naturalDelta;values=$.extend(values,this.cropper.getData());}this.setValues(values,delta);this.$wrapper.trigger('summaryUpdated');};Drupal.ImageWidgetCropType.prototype.resize=function(){if(!this.visible)return;var canvasDataOld=this.$image.cropper('getCanvasData');var cropBoxData=this.$image.cropper('getCropBoxData');this.$image.cropper('render');var canvasDataNew=this.$image.cropper('getCanvasData');var ratio=1;if(canvasDataOld.width!==0)ratio=canvasDataNew.width/canvasDataOld.width;$.each(cropBoxData,function(index,value){cropBoxData[index]=value*ratio;});this.$image.cropper('setCropBoxData',cropBoxData);this.updateHardLimits();this.updateSoftLimits();this.$wrapper.trigger('summaryUpdated');};Drupal.ImageWidgetCropType.prototype.setValue=function(name,value,delta){if(!this.values.hasOwnProperty(name)||!this.values[name][0])return;value=value?parseFloat(value):0;if(delta&&name!=='applied'){value=Math.floor(value*delta);if(value<this.hardLimit[name])value=name==='width'?this.originalWidth:name==='height'?this.originalHeight:null;}value=this.sanitizeSizes(name,value);this.values[name][0].value=value;this.values[name].trigger('change.iwc, input.iwc');};Drupal.ImageWidgetCropType.prototype.sanitizeSizes=function(name,value){if(name==="width"||name==="height")return this.recalculateOverflowSizes(name,value);return value;};Drupal.ImageWidgetCropType.prototype.recalculateOverflowSizes=function(name,value){var originalValue='original'+name.capitalize();if(value>this[originalValue]){value--;return value;}return value;};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1);};Drupal.ImageWidgetCropType.prototype.setValues=function(obj,delta){for(var name in obj){if(!obj.hasOwnProperty(name))continue;this.setValue(name,obj[name],delta);}};Drupal.ImageWidgetCropType.prototype.toCanvasDimensions=function(x,y){var imageData=this.cropper.getImageData();return {width:imageData.width*(x/this.originalWidth),height:imageData.height*(y/this.originalHeight)};};Drupal.ImageWidgetCropType.prototype.toImageDimensions=function(x,y){var imageData=this.cropper.getImageData();return {width:x*(this.originalWidth/imageData.width),height:y*(this.originalHeight/imageData.height)};};Drupal.ImageWidgetCropType.prototype.updateHardLimits=function(){if(!this.cropper||!this.hardLimit.width||!this.hardLimit.height)return;var options=this.cropper.options;var converted=this.toCanvasDimensions(this.hardLimit.width,this.hardLimit.height);options.minCropBoxWidth=converted.width;options.minCropBoxHeight=converted.height;this.cropper.limitCropBox(true,false);};Drupal.ImageWidgetCropType.prototype.updateSoftLimits=function(){if(!this.cropper||!this.softLimit.width||!this.softLimit.height)return;var cropBoxData=this.cropper.getCropBoxData();var converted=this.toImageDimensions(cropBoxData.width,cropBoxData.height);var dimensions=['width','height'];for(var i=0,l=dimensions.length;i<l;i++){var dimension=dimensions[i];if(converted[dimension]<this.softLimit[dimension]){if(!this.softLimit.reached[dimension])this.softLimit.reached[dimension]=true;}else{if(this.softLimit.reached[dimension])this.softLimit.reached[dimension]=false;}this.$cropperWrapper.toggleClass('cropper--'+dimension+'-soft-limit-reached',this.softLimit.reached[dimension]);}this.$wrapper.trigger('summaryUpdated');};Drupal.ImageWidgetCropType.prototype.updateSummary=function(){var summary=[];if(this.getValue('applied'))summary.push(Drupal.t('Cropping applied.'));if(this.softLimit.reached.height||this.softLimit.reached.width)summary.push(Drupal.t('Soft limit reached.'));return summary.join('<br>');};}(jQuery,Drupal));;
(function($,Drupal){'use strict';Drupal.behaviors.imageWidgetCrop={attach:function(context){this.createInstances(context);},detach:function(context,settings,trigger){if(trigger==="unload")this.destroyInstances(context);},createInstances:function(context){var $context=$(context||document);$context.find(Drupal.ImageWidgetCrop.prototype.selectors.wrapper).each(function(){var $element=$(this);if(!$element.data('ImageWidgetCrop'))$element.data('ImageWidgetCrop',new Drupal.ImageWidgetCrop($element));});},destroyInstances:function(context){var $context=$(context||document);$context.find(Drupal.ImageWidgetCrop.prototype.selectors.wrapper).each(function(){var $element=$(this);var instance=$element.data('ImageWidgetCrop');if(instance){instance.destroy();$element.removeData('ImageWidgetCrop');}});}};}(jQuery,Drupal));;
(function($,Drupal,drupalSettings){'use strict';Drupal.ImageWidgetCropType.prototype.updateSummary=function(){return '';};Drupal.behaviors.socialBaseImageWidgetCrop={attach:function attach(context,drupalSettings){$('.image-widget-data').each(function(i,e){if(!$('> .form-file',e).length&&!$(e).data('crop-attached')){$(e).parent().next('.image-data__crop-wrapper').attr('open','open');$(e).data('crop-attached',true);}else{if($('> .form-file',e).length&&$(e).data('crop-attached'))$(e).data('crop-attached',false);}});}};$('.image-widget-data').each(function(i,e){if(!$('> .form-file',e).length)$(e).data('crop-attached',true);});delete Drupal.behaviors.imageWidgetCrop.detach;})(jQuery,Drupal,drupalSettings);;
(function($,Drupal,drupalSettings){'use strict';Drupal.ImageWidgetCropType.prototype.updateSummary=function(){return '';};Drupal.behaviors.socialBaseImageWidgetCrop={attach:function(context,drupalSettings){$('.image-widget-data').each(function(i,e){if(!$('> .form-file',e).length&&!$(e).data('crop-attached')){$(e).parent().next('.image-data__crop-wrapper').attr('open','open');$(e).data('crop-attached',true);}else{if($('> .form-file',e).length&&$(e).data('crop-attached'))$(e).data('crop-attached',false);}});}};$('.image-widget-data').each(function(i,e){if(!$('> .form-file',e).length)$(e).data('crop-attached',true);});delete Drupal.behaviors.imageWidgetCrop.detach;})(jQuery,Drupal,drupalSettings);;
(function($,Drupal){if(Drupal.ImageWidgetCrop&&Drupal.ImageWidgetCrop.prototype&&Drupal.ImageWidgetCrop.prototype.selectors&&Drupal.ImageWidgetCrop.prototype.selectors.summary)Drupal.ImageWidgetCrop.prototype.selectors.summary+=', > .panel-heading > .panel-title';})(window.jQuery,window.Drupal);;
(function($,window,Drupal,drupalSettings,once){"use strict";var handleFragmentLinkClickOrHashChange=function handleFragmentLinkClickOrHashChange(e,$target){$target.parents('.vertical-tabs-pane').each(function(index,pane){$(pane).data('verticalTab').focus();});};Drupal.behaviors.verticalTabs={attach:function(context){var width=drupalSettings.widthBreakpoint||640;var mq='(max-width: '+width+'px)';if(window.matchMedia(mq).matches)return;$(once('vertical-tabs-fragments','body')).on('formFragmentLinkClickOrHashChange.verticalTabs',handleFragmentLinkClickOrHashChange);$(once('vertical-tabs','[data-vertical-tabs-panes]',context)).each(function(){var $this=$(this).addClass('tab-content vertical-tabs-panes');var focusID=$(':hidden.vertical-tabs__active-tab',this).val();if(typeof focusID==='undefined'||!focusID.length)focusID=false;var tab_focus;var $details=$this.find('> .panel');if($details.length===0)return;var tab_list=$('<ul class="nav nav-tabs vertical-tabs-list"></ul>');$this.wrap('<div class="tabbable tabs-left vertical-tabs clearfix"></div>').before(tab_list);$details.each(function(){var $that=$(this);var vertical_tab=new Drupal.verticalTab({title:$that.find('> .panel-heading > .panel-title, > .panel-heading').last().html(),details:$that});tab_list.append(vertical_tab.item);$that.removeClass('collapsed').attr('open',true).removeClass('collapsible collapsed panel panel-default').addClass('tab-pane vertical-tabs-pane').data('verticalTab',vertical_tab).find('> .panel-heading').remove();if(this.id===focusID)tab_focus=$that;});$(tab_list).find('> li:first').addClass('first');$(tab_list).find('> li:last').addClass('last');if(!tab_focus){var $locationHash=$this.find(window.location.hash);if(window.location.hash&&$locationHash.length)tab_focus=$locationHash.closest('.vertical-tabs-pane');else tab_focus=$this.find('> .vertical-tabs-pane:first');}if(tab_focus.length)tab_focus.data('verticalTab').focus();});$(once('bootstrap-tabs','.tabbable',context)).each(function(){var $wrapper=$(this);var $tabs=$wrapper.find('.nav-tabs');var $content=$wrapper.find('.tab-content');var borderRadius=parseInt($content.css('borderBottomRightRadius'),10);var bootstrapTabResize=function(){if($wrapper.hasClass('tabs-left')||$wrapper.hasClass('tabs-right'))$content.css('min-height',$tabs.outerHeight());};bootstrapTabResize();if($wrapper.hasClass('tabs-left')||$wrapper.hasClass('tabs-right'))$tabs.on('shown.bs.tab','a[data-toggle="tab"]',function(e){bootstrapTabResize();if($wrapper.hasClass('tabs-left'))if($(e.target).parent().is(':first-child'))$content.css('borderTopLeftRadius','0');else $content.css('borderTopLeftRadius',borderRadius+'px');else if($(e.target).parent().is(':first-child'))$content.css('borderTopRightRadius','0');else $content.css('borderTopRightRadius',borderRadius+'px');});});}};Drupal.verticalTab=function(settings){var self=this;$.extend(this,settings,Drupal.theme('verticalTab',settings));this.link.attr('href','#'+settings.details.attr('id'));this.link.on('click',function(e){e.preventDefault();self.focus();});this.link.on('keydown',function(event){if(event.keyCode===13){event.preventDefault();self.focus();$(".vertical-tabs-pane :input:visible:enabled:first").trigger('focus');}});this.details.on('summaryUpdated',function(){self.updateSummary();}).trigger('summaryUpdated');};Drupal.verticalTab.prototype={focus:function(){this.details.siblings('.vertical-tabs-pane').each(function(){$(this).removeClass('active').find('> div').removeClass('in');var tab=$(this).data('verticalTab');tab.item.removeClass('selected');}).end().addClass('active').siblings(':hidden.vertical-tabs-active-tab').val(this.details.attr('id'));this.details.find('> div').addClass('in');this.details.data('verticalTab').item.find('a').tab('show');this.item.addClass('selected');$('#active-vertical-tab').remove();this.link.append('<span id="active-vertical-tab" class="visually-hidden">'+Drupal.t('(active tab)')+'</span>');},updateSummary:function(){this.summary.html(this.details.drupalGetSummary());},tabShow:function(){this.item.show();this.item.closest('.form-type-vertical-tabs').show();this.item.parent().children('.vertical-tab-button').removeClass('first').filter(':visible:first').addClass('first');this.details.removeClass('vertical-tab-hidden').show();this.focus();return this;},tabHide:function(){this.item.hide();this.item.parent().children('.vertical-tab-button').removeClass('first').filter(':visible:first').addClass('first');this.details.addClass('vertical-tab-hidden').hide();var $firstTab=this.details.siblings('.vertical-tabs-pane:not(.vertical-tab-hidden):first');if($firstTab.length)$firstTab.data('verticalTab').focus();else this.item.closest('.form-type-vertical-tabs').hide();return this;}};Drupal.theme.verticalTab=function(settings){var tab={};tab.item=$('<li class="vertical-tab-button" tabindex="-1"></li>').append(tab.link=$('<a href="#'+settings.details[0].id+'" data-toggle="tab"></a>').append(tab.title=$('<span></span>').html(settings.title)).append(tab.summary=$('<div class="summary"></div>')));return tab;};})(jQuery,this,Drupal,drupalSettings,once);;
+function($){'use strict';var Tab=function(element){this.element=$(element);};Tab.VERSION='3.4.1';Tab.TRANSITION_DURATION=150;Tab.prototype.show=function(){var $this=this.element;var $ul=$this.closest('ul:not(.dropdown-menu)');var selector=$this.data('target');if(!selector){selector=$this.attr('href');selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,'');}if($this.parent('li').hasClass('active'))return;var $previous=$ul.find('.active:last a');var hideEvent=$.Event('hide.bs.tab',{relatedTarget:$this[0]});var showEvent=$.Event('show.bs.tab',{relatedTarget:$previous[0]});$previous.trigger(hideEvent);$this.trigger(showEvent);if(showEvent.isDefaultPrevented()||hideEvent.isDefaultPrevented())return;var $target=$(document).find(selector);this.activate($this.closest('li'),$ul);this.activate($target,$target.parent(),function(){$previous.trigger({type:'hidden.bs.tab',relatedTarget:$this[0]});$this.trigger({type:'shown.bs.tab',relatedTarget:$previous[0]});});};Tab.prototype.activate=function(element,container,callback){var $active=container.find('> .active');var transition=callback&&$.support.transition&&($active.length&&$active.hasClass('fade')||!!container.find('> .fade').length);function next(){$active.removeClass('active').find('> .dropdown-menu > .active').removeClass('active').end().find('[data-toggle="tab"]').attr('aria-expanded',false);element.addClass('active').find('[data-toggle="tab"]').attr('aria-expanded',true);if(transition){element[0].offsetWidth;element.addClass('in');}else element.removeClass('fade');if(element.parent('.dropdown-menu').length)element.closest('li.dropdown').addClass('active').end().find('[data-toggle="tab"]').attr('aria-expanded',true);callback&&callback();}$active.length&&transition?$active.one('bsTransitionEnd',next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next();$active.removeClass('in');};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data('bs.tab');if(!data)$this.data('bs.tab',(data=new Tab(this)));if(typeof option=='string')data[option]();});}var old=$.fn.tab;$.fn.tab=Plugin;$.fn.tab.Constructor=Tab;$.fn.tab.noConflict=function(){$.fn.tab=old;return this;};var clickHandler=function(e){e.preventDefault();Plugin.call($(this),'show');};$(document).on('click.bs.tab.data-api','[data-toggle="tab"]',clickHandler).on('click.bs.tab.data-api','[data-toggle="pill"]',clickHandler);}(jQuery);;
(function($,Drupal,drupalSettings){let activeItem=Drupal.url(drupalSettings.path.currentPath);$.fn.drupalToolbarMenuHorizontal=function(){let currentPath=drupalSettings.path.currentPath;const menu=once('toolbar-menu-horizontal',this);if(menu.length){const $menu=$(menu);if(activeItem){const count=currentPath.split('/').length;for(let i=0;i<count;i++){const $menuItem=$menu.find(`a[data-drupal-link-system-path="${currentPath}"]`);if($menuItem.length!==0){$menuItem.closest('a').addClass('is-active');break;}const lastIndex=currentPath.lastIndexOf('/');currentPath=currentPath.slice(0,lastIndex);}}}};$.fn.drupalToolbarMenu=function(){const ui={handleOpen:Drupal.t('Extend'),handleClose:Drupal.t('Collapse')};function toggleList($item,switcher){const $toggle=$item.children('.toolbar-box').children('.toolbar-handle');switcher=typeof switcher!=='undefined'?switcher:!$item.hasClass('open');$item.toggleClass('open',switcher);$toggle.toggleClass('open',switcher);$toggle.find('.action').each((index,element)=>{element.textContent=switcher?ui.handleClose:ui.handleOpen;});}function toggleClickHandler(event){const $toggle=$(event.target);const $item=$toggle.closest('li');toggleList($item);const $openItems=$item.siblings().filter('.open');toggleList($openItems,false);}function linkClickHandler(event){if(!Drupal.toolbar.models.toolbarModel.get('isFixed'))Drupal.toolbar.models.toolbarModel.set('activeTab',null);event.stopPropagation();}function initItems($menu){const options={class:'toolbar-icon toolbar-handle',action:ui.handleOpen,text:''};$menu.find('li > a').wrap('<div class="toolbar-box">');$menu.find('li').each((index,element)=>{const $item=$(element);if($item.children('ul.toolbar-menu').length){const $box=$item.children('.toolbar-box');const $link=$box.find('a');options.text=Drupal.t('@label',{'@label':$link.length?$link[0].textContent:''});$item.children('.toolbar-box').append($(Drupal.theme('toolbarMenuItemToggle',options)).hide().fadeIn(150));}});}function markListLevels($lists,level){level=!level?1:level;const $lis=$lists.children('li').addClass(`level-${level}`);$lists=$lis.children('ul');if($lists.length)markListLevels($lists,level+1);}function openActiveItem($menu){let currentPath=drupalSettings.path.currentPath;const pathItem=$menu.find(`a[href="${window.location.pathname}"]`);if(pathItem.length&&!activeItem)activeItem=window.location.pathname;if(activeItem){const $activeItem=$menu.find(`a[href="${activeItem}"]`).addClass('menu-item--active');if(pathItem.length===0&&activeItem){const count=currentPath.split('/').length;for(let i=0;i<count;i++){const $menuItem=$menu.find(`a[data-drupal-link-system-path="${currentPath}"]`);if($menuItem.length!==0){const $activeTrail=$menuItem.parentsUntil('.root','li').addClass('menu-item--active-trail');toggleList($activeTrail,true);break;}const lastIndex=currentPath.lastIndexOf('/');currentPath=currentPath.slice(0,lastIndex);}}else{const $activeTrail=$activeItem.parentsUntil('.root','li').addClass('menu-item--active-trail');toggleList($activeTrail,true);}}}return this.each(function(selector){const menu=once('toolbar-menu-vertical',this);if(menu.length){const $menu=$(menu);$menu.on('click.toolbar','.toolbar-box',toggleClickHandler).on('click.toolbar','.toolbar-box a',linkClickHandler);$menu.addClass('root');initItems($menu);markListLevels($menu);openActiveItem($menu);}});};Drupal.theme.toolbarMenuItemToggle=function(options){return `<button class="${options.class}"><span class="action">${options.action}</span> <span class="label">${options.text}</span></button>`;};})(jQuery,Drupal,drupalSettings);;
(function($,Drupal,drupalSettings){(()=>{if(!sessionStorage.getItem('Drupal.toolbar.toolbarState'))return;const toolbarState=JSON.parse(sessionStorage.getItem('Drupal.toolbar.toolbarState'));const {activeTray,orientation,isOriented}=toolbarState;const activeTrayElement=document.querySelector(`.toolbar-tray[data-toolbar-tray="${activeTray}"]`);const activeTrayToggle=document.querySelector(`.toolbar-item[data-toolbar-tray="${activeTray}"]`);if(activeTrayElement){activeTrayElement.classList.add(`toolbar-tray-${orientation}`,'is-active');activeTrayToggle.classList.add('is-active');}if(isOriented)document.querySelector('#toolbar-administration').classList.add('toolbar-oriented');})();const options=$.extend({breakpoints:{'toolbar.narrow':'','toolbar.standard':'','toolbar.wide':''}},drupalSettings.toolbar,{strings:{horizontal:Drupal.t('Horizontal orientation'),vertical:Drupal.t('Vertical orientation')}});Drupal.behaviors.toolbar={attach(context){if(!window.matchMedia('only screen').matches)return;once('toolbar','#toolbar-administration',context).forEach((toolbar)=>{const model=new Drupal.toolbar.ToolbarModel({locked:JSON.parse(localStorage.getItem('Drupal.toolbar.trayVerticalLocked')),activeTab:document.getElementById(JSON.parse(localStorage.getItem('Drupal.toolbar.activeTabID'))),height:$('#toolbar-administration').outerHeight()});Drupal.toolbar.models.toolbarModel=model;Object.keys(options.breakpoints).forEach((label)=>{const mq=options.breakpoints[label];const mql=window.matchMedia(mq);Drupal.toolbar.mql[label]=mql;mql.addListener(Drupal.toolbar.mediaQueryChangeHandler.bind(null,model,label));Drupal.toolbar.mediaQueryChangeHandler.call(null,model,label,mql);});Drupal.toolbar.views.toolbarVisualView=new Drupal.toolbar.ToolbarVisualView({el:toolbar,model,strings:options.strings});Drupal.toolbar.views.toolbarAuralView=new Drupal.toolbar.ToolbarAuralView({el:toolbar,model,strings:options.strings});Drupal.toolbar.views.bodyVisualView=new Drupal.toolbar.BodyVisualView({el:toolbar,model});model.trigger('change:isFixed',model,model.get('isFixed'));model.trigger('change:activeTray',model,model.get('activeTray'));const menuModel=new Drupal.toolbar.MenuModel();Drupal.toolbar.models.menuModel=menuModel;Drupal.toolbar.views.menuVisualView=new Drupal.toolbar.MenuVisualView({el:$(toolbar).find('.toolbar-menu-administration').get(0),model:menuModel,strings:options.strings});Drupal.toolbar.setSubtrees.done((subtrees)=>{menuModel.set('subtrees',subtrees);const theme=drupalSettings.ajaxPageState.theme;localStorage.setItem(`Drupal.toolbar.subtrees.${theme}`,JSON.stringify(subtrees));model.set('areSubtreesLoaded',true);});Drupal.toolbar.views.toolbarVisualView.loadSubtrees();$(document).on('drupalViewportOffsetChange.toolbar',(event,offsets)=>{model.set('offsets',offsets);});model.on('change:orientation',(model,orientation)=>{$(document).trigger('drupalToolbarOrientationChange',orientation);}).on('change:activeTab',(model,tab)=>{$(document).trigger('drupalToolbarTabChange',tab);}).on('change:activeTray',(model,tray)=>{$(document).trigger('drupalToolbarTrayChange',tray);});const toolbarState=sessionStorage.getItem('Drupal.toolbar.toolbarState')?JSON.parse(sessionStorage.getItem('Drupal.toolbar.toolbarState')):{};if(Drupal.toolbar.models.toolbarModel.get('orientation')==='horizontal'&&Drupal.toolbar.models.toolbarModel.get('activeTab')===null&&!toolbarState.orientation)Drupal.toolbar.models.toolbarModel.set({activeTab:$('.toolbar-bar .toolbar-tab:not(.home-toolbar-tab) a').get(0)});$(window).on({'dialog:aftercreate':(event,dialog,$element,settings)=>{const toolbarBar=document.getElementById('toolbar-bar');if(toolbarBar){toolbarBar.style.marginTop='0';if(settings.drupalOffCanvasPosition==='top'){const height=Drupal.offCanvas.getContainer($element).outerHeight();toolbarBar.style.marginTop=`${height}px`;$element.on('dialogContentResize.off-canvas',()=>{const newHeight=Drupal.offCanvas.getContainer($element).outerHeight();toolbarBar.style.marginTop=`${newHeight}px`;});}}},'dialog:beforeclose':()=>{const toolbarBar=document.getElementById('toolbar-bar');if(toolbarBar)toolbarBar.style.marginTop='0';}});});if(once('toolbarAntiFlicker','#toolbar-administration',context).length)Drupal.toolbar.models.toolbarModel.on('change:activeTab change:orientation change:isOriented change:isTrayToggleVisible change:offsets',function(){const userButton=document.querySelector('#toolbar-item-user');const hasActiveTab=!!$(this.get('activeTab')).length>0;const previousToolbarState=sessionStorage.getItem('Drupal.toolbar.toolbarState')?JSON.parse(sessionStorage.getItem('Drupal.toolbar.toolbarState')):{};const toolbarState={...previousToolbarState,orientation:Drupal.toolbar.models.toolbarModel.get('orientation'),hasActiveTab,activeTabId:hasActiveTab?this.get('activeTab').id:null,activeTray:$(this.get('activeTab')).attr('data-toolbar-tray'),isOriented:this.get('isOriented'),isFixed:this.get('isFixed'),userButtonMinWidth:userButton?userButton.clientWidth:0};sessionStorage.setItem('Drupal.toolbar.toolbarState',JSON.stringify(toolbarState));});}};Drupal.toolbar={views:{},models:{},mql:{},setSubtrees:new $.Deferred(),mediaQueryChangeHandler(model,label,mql){switch(label){case 'toolbar.narrow':model.set({isOriented:mql.matches,isTrayToggleVisible:false});if(!mql.matches||!model.get('orientation'))model.set({orientation:'vertical'},{validate:true});break;case 'toolbar.standard':model.set({isFixed:mql.matches});break;case 'toolbar.wide':model.set({orientation:mql.matches&&!model.get('locked')?'horizontal':'vertical'},{validate:true});model.set({isTrayToggleVisible:mql.matches});break;default:break;}}};Drupal.theme.toolbarOrientationToggle=function(){return ('<div class="toolbar-toggle-orientation"><div class="toolbar-lining">'+'<button class="toolbar-icon" type="button"></button>'+'</div></div>');};Drupal.AjaxCommands.prototype.setToolbarSubtrees=function(ajax,response,status){Drupal.toolbar.setSubtrees.resolve(response.subtrees);};})(jQuery,Drupal,drupalSettings);;
(function(Backbone,Drupal){Drupal.toolbar.MenuModel=Backbone.Model.extend({defaults:{subtrees:null}});})(Backbone,Drupal);;
(function(Backbone,Drupal){Drupal.toolbar.ToolbarModel=Backbone.Model.extend({defaults:{activeTab:null,activeTray:null,isOriented:false,isFixed:false,areSubtreesLoaded:false,isViewportOverflowConstrained:false,orientation:'horizontal',locked:false,isTrayToggleVisible:true,height:null,offsets:{top:0,right:0,bottom:0,left:0}},validate(attributes,options){if(attributes.orientation==='horizontal'&&this.get('locked')&&!options.override)return Drupal.t('The toolbar cannot be set to a horizontal orientation when it is locked.');}});})(Backbone,Drupal);;
(function($,Drupal,Backbone){Drupal.toolbar.BodyVisualView=Backbone.View.extend({initialize(){this.listenTo(this.model,'change:activeTray ',this.render);this.listenTo(this.model,'change:isFixed change:isViewportOverflowConstrained',this.isToolbarFixed);},isToolbarFixed(){const isViewportOverflowConstrained=this.model.get('isViewportOverflowConstrained');$('body').toggleClass('toolbar-fixed',isViewportOverflowConstrained||this.model.get('isFixed'));},render(){$('body').toggleClass('toolbar-tray-open',!!this.model.get('activeTray'));}});})(jQuery,Drupal,Backbone);;
(function($,Backbone,Drupal){Drupal.toolbar.MenuVisualView=Backbone.View.extend({initialize(){this.listenTo(this.model,'change:subtrees',this.render);this.render();},render(){this.renderVertical();this.renderHorizontal();},renderHorizontal(){if('drupalToolbarMenu' in $.fn)this.$el.children('.toolbar-menu').drupalToolbarMenuHorizontal();},renderVertical(){const subtrees=this.model.get('subtrees');if(!this.model.get('subtrees'))return;Object.keys(subtrees||{}).forEach((id)=>{$(once('toolbar-subtrees',this.$el.find(`#toolbar-link-${id}`))).after(subtrees[id]);});if('drupalToolbarMenu' in $.fn)this.$el.children('.toolbar-menu').drupalToolbarMenu();}});})(jQuery,Backbone,Drupal);;
(function(Backbone,Drupal){Drupal.toolbar.ToolbarAuralView=Backbone.View.extend({initialize(options){this.strings=options.strings;this.listenTo(this.model,'change:orientation',this.onOrientationChange);this.listenTo(this.model,'change:activeTray',this.onActiveTrayChange);},onOrientationChange(model,orientation){Drupal.announce(Drupal.t('Tray orientation changed to @orientation.',{'@orientation':orientation}));},onActiveTrayChange(model,tray){const relevantTray=tray===null?model.previous('activeTray'):tray;if(!relevantTray)return;const action=tray===null?Drupal.t('closed'):Drupal.t('opened');const trayNameElement=relevantTray.querySelector('.toolbar-tray-name');let text;if(trayNameElement!==null)text=Drupal.t('Tray "@tray" @action.',{'@tray':trayNameElement.textContent,'@action':action});else text=Drupal.t('Tray @action.',{'@action':action});Drupal.announce(text);}});})(Backbone,Drupal);;
(function($,Drupal,drupalSettings,Backbone){Drupal.toolbar.ToolbarVisualView=Backbone.View.extend({events(){const touchEndToClick=function(event){event.preventDefault();event.target.click();};return {'click .toolbar-bar .toolbar-tab .trigger':'onTabClick','click .toolbar-toggle-orientation button':'onOrientationToggleClick','touchend .toolbar-bar .toolbar-tab .trigger':touchEndToClick,'touchend .toolbar-toggle-orientation button':touchEndToClick};},initialize(options){this.strings=options.strings;this.listenTo(this.model,'change:activeTab change:orientation change:isOriented change:isTrayToggleVisible',this.render);this.listenTo(this.model,'change:mqMatches',this.onMediaQueryChange);this.listenTo(this.model,'change:offsets',this.adjustPlacement);this.listenTo(this.model,'change:activeTab change:orientation change:isOriented',this.updateToolbarHeight);this.$el.find('.toolbar-tray .toolbar-lining').has('.toolbar-menu').append(Drupal.theme('toolbarOrientationToggle'));this.model.trigger('change:activeTab');},updateToolbarHeight(){const toolbarTabOuterHeight=$('#toolbar-bar').find('.toolbar-tab').outerHeight()||0;const toolbarTrayHorizontalOuterHeight=$('.is-active.toolbar-tray-horizontal').outerHeight()||0;this.model.set('height',toolbarTabOuterHeight+toolbarTrayHorizontalOuterHeight);$('body')[0].style.paddingTop=`${this.model.get('height')}px`;$('html')[0].style.scrollPaddingTop=`${this.model.get('height')}px`;this.triggerDisplace();},triggerDisplace(){_.defer(()=>{Drupal.displace(true);});},render(){this.updateTabs();this.updateTrayOrientation();this.updateBarAttributes();$('[data-toolbar-anti-flicker-loading]').remove();$('html').removeClass(['toolbar-loading','toolbar-horizontal','toolbar-vertical','toolbar-tray-open','toolbar-fixed','toolbar-oriented','toolbar-anti-flicker']);$('body').removeClass('toolbar-loading');if(this.model.changed.orientation==='vertical'||this.model.changed.activeTab)this.loadSubtrees();return this;},onTabClick(event){if(event.currentTarget.hasAttribute('data-toolbar-tray')){const activeTab=this.model.get('activeTab');const clickedTab=event.currentTarget;this.model.set('activeTab',!activeTab||clickedTab!==activeTab?clickedTab:null);event.preventDefault();event.stopPropagation();}},onOrientationToggleClick(event){const orientation=this.model.get('orientation');const antiOrientation=orientation==='vertical'?'horizontal':'vertical';const locked=antiOrientation==='vertical';if(locked)localStorage.setItem('Drupal.toolbar.trayVerticalLocked','true');else localStorage.removeItem('Drupal.toolbar.trayVerticalLocked');this.model.set({locked,orientation:antiOrientation},{validate:true,override:true});event.preventDefault();event.stopPropagation();},updateTabs(){const $tab=$(this.model.get('activeTab'));$(this.model.previous('activeTab')).removeClass('is-active').prop('aria-pressed',false);$(this.model.previous('activeTray')).removeClass('is-active');localStorage.removeItem('Drupal.toolbar.activeTabID');if($tab.length>0){$tab.addClass('is-active').prop('aria-pressed',true);const name=$tab.attr('data-toolbar-tray');const id=$tab.get(0).id;if(id)localStorage.setItem('Drupal.toolbar.activeTabID',JSON.stringify(id));const $tray=this.$el.find(`[data-toolbar-tray="${name}"].toolbar-tray`);if($tray.length){$tray.addClass('is-active');this.model.set('activeTray',$tray.get(0));}else this.model.set('activeTray',null);}else{this.model.set('activeTray',null);localStorage.removeItem('Drupal.toolbar.activeTabID');}},updateBarAttributes(){const isOriented=this.model.get('isOriented');if(isOriented)this.$el.find('.toolbar-bar').attr('data-offset-top','');else this.$el.find('.toolbar-bar').removeAttr('data-offset-top');this.$el.toggleClass('toolbar-oriented',isOriented);},updateTrayOrientation(){const orientation=this.model.get('orientation');const antiOrientation=orientation==='vertical'?'horizontal':'vertical';$('body').toggleClass('toolbar-vertical',orientation==='vertical').toggleClass('toolbar-horizontal',orientation==='horizontal');const removeClass=antiOrientation==='horizontal'?'toolbar-tray-horizontal':'toolbar-tray-vertical';const $trays=this.$el.find('.toolbar-tray').removeClass(removeClass).addClass(`toolbar-tray-${orientation}`);const iconClass=`toolbar-icon-toggle-${orientation}`;const iconAntiClass=`toolbar-icon-toggle-${antiOrientation}`;const $orientationToggle=this.$el.find('.toolbar-toggle-orientation').toggle(this.model.get('isTrayToggleVisible'));const $orientationToggleButton=$orientationToggle.find('button');$orientationToggleButton[0].value=antiOrientation;$orientationToggleButton.attr('title',this.strings[antiOrientation]).removeClass(iconClass).addClass(iconAntiClass);$orientationToggleButton[0].textContent=this.strings[antiOrientation];const dir=document.documentElement.dir;const edge=dir==='rtl'?'right':'left';$trays.removeAttr('data-offset-left data-offset-right data-offset-top');$trays.filter('.toolbar-tray-vertical.is-active').attr(`data-offset-${edge}`,'');$trays.filter('.toolbar-tray-horizontal.is-active').attr('data-offset-top','');},adjustPlacement(){const $trays=this.$el.find('.toolbar-tray');if(!this.model.get('isOriented'))$trays.removeClass('toolbar-tray-horizontal').addClass('toolbar-tray-vertical');},loadSubtrees(){const $activeTab=$(this.model.get('activeTab'));const orientation=this.model.get('orientation');if(!this.model.get('areSubtreesLoaded')&&typeof $activeTab.data('drupal-subtrees')!=='undefined'&&orientation==='vertical'){const subtreesHash=drupalSettings.toolbar.subtreesHash;const theme=drupalSettings.ajaxPageState.theme;const endpoint=Drupal.url(`toolbar/subtrees/${subtreesHash}`);const cachedSubtreesHash=localStorage.getItem(`Drupal.toolbar.subtreesHash.${theme}`);const cachedSubtrees=JSON.parse(localStorage.getItem(`Drupal.toolbar.subtrees.${theme}`));const isVertical=this.model.get('orientation')==='vertical';if(isVertical&&subtreesHash===cachedSubtreesHash&&cachedSubtrees)Drupal.toolbar.setSubtrees.resolve(cachedSubtrees);else{if(isVertical){localStorage.removeItem(`Drupal.toolbar.subtreesHash.${theme}`);localStorage.removeItem(`Drupal.toolbar.subtrees.${theme}`);Drupal.ajax({url:endpoint}).execute();localStorage.setItem(`Drupal.toolbar.subtreesHash.${theme}`,subtreesHash);}}}}});})(jQuery,Drupal,drupalSettings,Backbone);;
(function($,Drupal){Drupal.behaviors.adminToolbar={attach:function(context,settings){$('a.toolbar-icon',context).removeAttr('title');$('ul.toolbar-menu li.menu-item--expanded a',context).on('focusin',function(){$('li.menu-item--expanded',context).removeClass('hover-intent');$(this).parents('li.menu-item--expanded').addClass('hover-intent');});$('ul.toolbar-menu li.menu-item a',context).keydown(function(e){if((e.shiftKey&&(e.keyCode||e.which)==9))if($(this).parent('.menu-item').prev().hasClass('menu-item--expanded'))$(this).parent('.menu-item').prev().addClass('hover-intent');});$('.toolbar-menu:first-child > .menu-item:not(.menu-item--expanded) a, .toolbar-tab > a',context).on('focusin',function(){$('.menu-item--expanded').removeClass('hover-intent');});$('.toolbar-menu:first-child > .menu-item',context).on('hover',function(){$(this,'a').css("background: #fff;");});$('ul:not(.toolbar-menu)',context).on({mousemove:function(){$('li.menu-item--expanded').removeClass('hover-intent');},hover:function(){$('li.menu-item--expanded').removeClass('hover-intent');}});if(window.matchMedia("(max-width: 767px)").matches&&$('body').hasClass('toolbar-tray-open')){$('body').removeClass('toolbar-tray-open');$('#toolbar-item-administration').removeClass('is-active');$('#toolbar-item-administration-tray').removeClass('is-active');};}};})(jQuery,Drupal);;
(function($){$(document).ready(function(){$('.toolbar-tray.toolbar-tray-horizontal .menu-item.menu-item--expanded').hover(function(){$(this).parent().find('li').removeClass('hover-intent');$(this).addClass('hover-intent');},function(){$(this).removeClass('hover-intent');});});})(jQuery);;
(function($,Drupal,drupalSettings){const pathInfo=drupalSettings.path;const escapeAdminPath=sessionStorage.getItem('escapeAdminPath');const windowLocation=window.location;if(!pathInfo.currentPathIsAdmin&&!/destination=/.test(windowLocation.search))sessionStorage.setItem('escapeAdminPath',windowLocation);Drupal.behaviors.escapeAdmin={attach(){const toolbarEscape=once('escapeAdmin','[data-toolbar-escape-admin]');if(toolbarEscape.length&&pathInfo.currentPathIsAdmin&&escapeAdminPath!==null)$(toolbarEscape).attr('href',escapeAdminPath);}};})(jQuery,Drupal,drupalSettings);;
(function($,Drupal,once){Drupal.behaviors.notificationUpdate={attach:function(context){const $notificationUpdateOnce=$(once('notificationUpdate','.notification-bell',context));$notificationUpdateOnce.click(this._updateNotificationCount);},_updateNotificationCount:function(){if($(this).hasClass('open'))return;$('.dropdown-menu a',this).first().click();}};})(jQuery,Drupal,once);;
